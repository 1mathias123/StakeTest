
<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
      <link rel="stylesheet" type="text/css" href="css/bootstrap3.min.css" />
      <link rel="stylesheet" type="text/css" href="css/style2.css?ver=1.02" />
      <link rel="stylesheet" type="text/css" href="css/responsive2.css" />
      <link rel="stylesheet" type="text/css" href="css/animate.css" />
      <link rel="icon" href="images/favicon.png" type="image/gif" sizes="10x16">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
      <title>Galaxy</title>
   </head>
   <body>
      <!-- Header -->
      <!-- <header>
         <div class="container-fluid">
            <div class="row">
               <div class="col-lg-3 col-md-0 col-sm-0 col-xs-0">
                  <div class="returb-bx">
                     <a href="index.html" class="btn-main"><i class="fa fa-arrow-left"></i> Back To Homepage</a>
                  </div>
               </div>
               <div class="col-lg-7 col-md-0 col-sm-0 col-xs-0">
                  <div class="scror-bord">
                     <div class="row">
                        <div class="col-md-3 col-sm-3">
                           <div class="scr-bx">
                              <div class="scr-img">
                                 <img src="images/head-ic1.png" alt="">
                              </div>
                              <div class="scr-dt">
                                 <h4>133.231</h4>
                                 <h6>Invested TRX</h6>
                              </div>
                           </div>
                        </div>
                        <div class="col-md-3 col-sm-3">
                           <div class="scr-bx">
                              <div class="scr-img">
                                 <img src="images/head-ic2.png" alt="">
                              </div>
                              <div class="scr-dt">
                                 <h4>541.336</h4>
                                 <h6>payout TRX</h6>
                              </div>
                           </div>
                        </div>
                        <div class="col-md-3 col-sm-3">
                           <div class="scr-bx">
                              <div class="scr-img">
                                 <img src="images/head-ic3.png" alt="">
                              </div>
                              <div class="scr-dt">
                                 <h4>13.877</h4>
                                 <h6>active business</h6>
                              </div>
                           </div>
                        </div>
                        <div class="col-md-3 col-sm-3">
                           <div class="scr-bx">
                              <div class="scr-img">
                                 <img src="images/head-ic4.png" alt="">
                              </div>
                              <div class="scr-dt">
                                 <h4>136</h4>
                                 <h6>players</h6>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-lg-offset-0 col-lg-2 col-md-6 col-xs-offset-6 col-xs-6 col-sm-offset-6 col-sm-6">
                  <div class="profile-blocks dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                        <div class="pro-main">
                           <div class="pro-imgs">
                              <img src="images/logo.png" alt="">
                           </div>
                           <div class="pro-nm">
                              <p>James DOE <i class="fa fa-angle-down"></i></p>
                           </div>
                        </div>
                     </a>
                     <ul class="dropdown-menu">
                        <li><a href="#">profile</a></li>
                        <li><a href="#">withdraw</a></li>
                        <li><a href="#">deposit</a></li>
                        <li><a href="#">statistics</a></li>
                     </ul>
                  </div>
                  <a href="javascript:void(0);" id="open-nav" class="bar-ic"><img src="images/bar-ic.png" alt=""></a>
               </div>
            </div>
         </div>
      </header> -->
      <header>
         <div class="container-fluid">
            <div class="row">
               <div class="col-lg-3 col-md-0 col-sm-0 col-xs-0">
                  <div class="returb-bx">
                     <a href="index.html" class="btn-main"><i class="fa fa-arrow-left"></i> Back To Homepage</a>
                  </div>
               </div>
               <div class="col-lg-9 col-md-0 col-sm-0 col-xs-0">
                  <div class="scror-bord">
                     <nav class="navbar navbar-expand-md wow fadeInDown" data-wow-duration="1s" data-wow-delay="0.20s">
                          <div class="">
                              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                                  <span class="navbar-toggler-icon"></span>
                                  <span class="navbar-toggler-icon"></span>
                                  <span class="navbar-toggler-icon"></span>
                              </button>
                              <div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
                                  <ul class="navbar-nav nav-center">
                                      <li class="nav-item">
                                          <a class="nav-link" href="index.html">HOME</a>
                                      </li>
                                      <li class="nav-item">
                                          <a class="nav-link" href="#">DAPPS</a>
                                      </li>
                                      <li class="nav-item nav-social">
                                          <a href="https://t.me/darkmatterharvester"><i class="fab fa-telegram-plane"></i></a>
                                          <a href="https://discord.gg/NbSy6Sw"><i class="fab fa-discord"></i></a>
                                          <a href="#"><i class="fab fa-medium"></i></a>
                                      </li>

                                      <li class="nav-item">
                                          <a class="nav-link" href="#">WHITE PAPER</a>
                                      </li>
                                      <li class="nav-item">
                                          <a class="nav-link" href="https://tronscan.io/#/token20/TXhv2baQ2q3TWerrwBiXjj27js9QocJFU9">TOKEN</a>
                                      </li>
                                  </ul>
                                  <ul class="navbar-nav nav-right">
                                      <li class="nav-item btn-main">
                                          <a class="nav-link" href="#" id="user_addy">Login Tronlink</a>
                                      </li>
                                  </ul>
                              </div>
                          </div>
                      </nav>
                  </div>
               </div>

            </div>
         </div>
      </header>
      <!-- End Header -->
      <!-- Responsive Nav -->
      <div class="resp-nav">
         <div class="head-close">
            <a href="javascript:void(0);" id="close-nav"><img src="images/close.png" alt=""></a>
         </div>
         <div class="nav-list scroll-d">
            <div class="returb-bx">
               <a href="#" class="btn-main"><i class="fa fa-arrow-left"></i> return</a>
               <a href="#" class="top-play">top players <i class="fa fa-plus"></i></a>
            </div>
            <div class="scror-bord">
               <div class="row">
                  <div class="col-md-12 col-sm-12">
                     <div class="scr-bx">
                        <div class="scr-img">
                           <img src="images/head-ic1.png" alt="">
                        </div>
                        <div class="scr-dt">
                           <h4>133.231</h4>
                           <h6>Invested TRX</h6>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-12 col-sm-12">
                     <div class="scr-bx">
                        <div class="scr-img">
                           <img src="images/head-ic2.png" alt="">
                        </div>
                        <div class="scr-dt">
                           <h4>541.336</h4>
                           <h6>payout TRX</h6>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-12 col-sm-12">
                     <div class="scr-bx">
                        <div class="scr-img">
                           <img src="images/head-ic3.png" alt="">
                        </div>
                        <div class="scr-dt">
                           <h4>13.877</h4>
                           <h6>active business</h6>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-12 col-sm-12">
                     <div class="scr-bx">
                        <div class="scr-img">
                           <img src="images/head-ic4.png" alt="">
                        </div>
                        <div class="scr-dt">
                           <h4>136</h4>
                           <h6>players</h6>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="profile-blocks dropdown">
               <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                  <div class="pro-main">
                     <div class="pro-imgs">
                        <img src="images/user.png" alt="">
                     </div>
                     <div class="pro-nm">
                        <p>James DOE <i class="fa fa-angle-down"></i></p>
                     </div>
                  </div>
               </a>
               <ul class="dropdown-menu">
                  <li><a href="#">profile</a></li>
                  <li><a href="#">withdraw</a></li>
                  <li><a href="#">deposit</a></li>
                  <li><a href="#">statistics</a></li>
               </ul>
            </div>
         </div>
      </div>
      <!-- End Responsive Nav -->
      <!-- Main Wrapper -->
      <section class="main-wrpper">
         <div class="container-fluid">
            <div class="row">
               <div class="col-lg-3 col-md-4 col-sm-5">
                  <div class="sidebar">
                     <h3>STAKING OVERVIEW</h3>
                     <div class="player-listing">
                        <h4>Planets <span>Stake Pots</span></h4>
                        <ul>
                           <li>
                              <div class="row">
                                 <div class="col-md-6 col-sm-6 col-xs-8">
                                    <div class="play-rank">
                                       <div class="ply-rn">
                                          <span><img class="cloud9-item" src="images/plnt1.png"> </span>
                                       </div>
                                       <div class="ply-nms">
                                          <h4>Light Matter</h4>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="col-md-6 col-sm-6 col-xs-4">
                                    <div class="scr-high">
                                       <h5><div id="lmh-total">0</div><span>LMH</span></h5>
                                    </div>
                                 </div>
                              </div>
                           </li>
                           <li>
                              <div class="row">
                                 <div class="col-md-6 col-sm-6 col-xs-8">
                                    <div class="play-rank">
                                       <div class="ply-rn">
                                          <span class="rank-two"><img class="cloud9-item" src="images/plnt2.png"></span>
                                       </div>
                                       <div class="ply-nms">
                                          <h4>Dark Matter</h4>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="col-md-6 col-sm-6 col-xs-4">
                                    <div class="scr-high">
                                       <h5><div id="dmd-total">0</div><span>DMD</span></h5>
                                    </div>
                                 </div>
                              </div>
                           </li>
                           <li>
                              <div class="row">
                                 <div class="col-md-6 col-sm-6 col-xs-8">
                                    <div class="play-rank">
                                       <div class="ply-rn">
                                          <span class="rank-three"><img class="cloud9-item" src="images/plnt3.png"></span>
                                       </div>
                                       <div class="ply-nms">
                                          <h4>Void</h4>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="col-md-6 col-sm-6 col-xs-4">
                                    <div class="scr-high">
                                      <h5><div id="void-total">0</div><span>VOID</span></h5>
                                    </div>
                                 </div>
                              </div>
                           </li>
                           <li>
                              <div class="row">
                                 <div class="col-md-6 col-sm-6 col-xs-8">
                                    <div class="play-rank">
                                       <div class="ply-rn">
                                          <span class="rank-four"><img class="cloud9-item" src="images/plnt4.png"></span>
                                       </div>
                                       <div class="ply-nms">
                                          <h4>Frag</h4>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="col-md-6 col-sm-6 col-xs-4">
                                    <div class="scr-high not-win">
                                       <h5><div id="frag-total">0</div><span>FRAG</span></h5>
                                    </div>
                                 </div>
                              </div>
                           </li>
                        </ul>
                        <div class="help-box">
                           <div class="row">
                              <div class="col-md-2 col-sm-2 col-xs-2">
                                 <div class="help-ic">
                                    <img src="images/msg-ic.png" alt="">
                                 </div>
                              </div>
                              <div class="col-md-10 col-sm-10 col-xs-10">
                                 <div class="help-data">
                                    <h5>let me help you</h5>
                                    <p>Hey!</p>
                                    <p>This is the stake page, Here you can Stake in any of the pools, each pool has its own stake and rewards payout so make sure you check them all out!</p>
                                    <p>Pools have a 20% rollback fee on any leaves, and a 5% on withdraws to feed contract.</p>
                                    <p><span>Happy Staking!</span></p>
                                 </div>
                              </div>
                           </div>
                           <img src="images/astro-note.png" alt="" class="astro-user">
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-lg-9 col-md-8 col-sm-7">
                  <div class="main-center-box">
                     <div id="wrap">
                        <div id="showcase" class="noselect">
                          <div class="space">
                             <div class="main-goal">
                                <img class="cloud9-item" id="token2" src="images/plnt2.png" data-name="DARK MATTER" data-staked="0.00" data-total-staked="0.00" data-earning="0.00" data-payout="0.00" data-left="LIGHT MATTER" data-right="FRAG" token="DMD">
                             </div>
                          </div>
                          <div class="space">
                            <div class="main-goal">
                               <img class="cloud9-item" id="token1" src="images/plnt1.png" data-name="LIGHT MATTER" data-staked="0.00" data-total-staked="0.00" data-earning="0.00" data-payout="0.00" data-left="VOID" data-right="DARK MATTER" token="LMH">
                            </div>
                          </div>

                          <div class="space">
                            <div class="main-goal">
                               <img class="cloud9-item" id="token3" src="images/plnt3.png" data-name="VOID" data-staked="0.00" data-total-staked="0.00" data-earning="0.00" data-payout="0.00" data-left="FRAG" data-right="LIGHT MATTER" token="VOID">
                            </div>
                          </div>
                          <div class="space">
                            <div class="main-goal">
                               <img class="cloud9-item" id="token4" src="images/plnt4.png" data-name="FRAG" data-staked="0.00" data-total-staked="0.00" data-earning="0.00" data-payout="0.00" data-left="DARK MATTER" data-right="VOID" token="FRAG">
                            </div>
                          </div>
                        </div>
                        <div class="nav" class="noselect">
                           <button id="click-left" class="left btn-cls"><span><span id="arrow-left"></span> <i class="fa fa-arrow-left"></i></span></button>
                           <button class="right btn-cls" id="click-right"><span><i class="fa fa-arrow-right"></i> <span id="arrow-right"></span></span></button>
                        </div>
                     </div>
                     <div class="build-info">
                        <div class="row">
                           <div class="col-md-3 col-sm-4">
                              <div class="graph-img">
<!--                                  <img src="images/graph1.png" alt=""> -->
                                    <div class="growth-chart">
                                       <canvas id="canvas" width="800" height="200" style="animation: 16s linear 0s infinite normal none running leftgo;">
                                             [No canvas]
                                      </canvas>
                                    </div>
                              </div>
                              <div class="scr-bd">
                                 <h4>
                                    <div id="staked-amount"></div>
                                    <span class="token-selected">TRX</span>
                                 </h4>
                                 <p>staked amount</p>
                              </div>
                              <div class="scr-bd scr-bd-lst">
                                 <h4>
                                    <div id="total-staked"></div>
                                    <span class="token-selected">TRX</span>
                                 </h4>
                                 <p>total staked amount</p>
                              </div>
                           </div>
                           <div class="col-md-6 col-sm-4">
                              <div class="main-counter">
                                 <div class="btn-done-stake-outer">
                                    <input type="number" name=""  class="form-control" id="stake_amount">
                                    <a href="#" class="btn-done btn-done-stake" id="stake">Stake</strong></a>
                                 </div>
                                 <div>
                                    <h4 class="detail-head" id="selected">VOID</h4>
                                    <p>next payout: <span id="defaultCountdown"></span></p>
                                    <a href="#" class="btn-done" id="claim">Withdraw</a>
                                 </div>
                                 <!-- <div class="btn-done-outer"> <a href="#" class="btn-done">build <strong>133 TRX</strong></a></div> -->
                                 <div class="btn-done-stake-outer">
                                    <input type="number" name=""  class="form-control" id="unstake_amount">
                                    <a href="#" class="btn-done btn-done-stake"id="unstake">Unstake</strong></a>
                                 </div>
                              </div>
                           </div>
                           <div class="col-md-3 col-sm-4">
                              <div class="right-bar">
                                 <div class="graph-img">
                                     <div class="growth-chart growth-chart2">
                                       <canvas id="canvas2" width="800" height="200" style="animation: 16s linear 0s infinite normal none running leftgo;">
                                             [No canvas]
                                      </canvas>
                                    </div>
                                 </div>
                                 <div class="scr-bd acrti-bx">
                                    <h4>
                                       <div id="my-earning">133</div>
                                       <span class="token-selected">TRX</span>
                                    </h4>
                                    <p>my earnings so far</p>
                                 </div>
                                 <div class="scr-bd scr-bd-lst">
                                    <h4>
                                       <div id="estimated-payout">13</div>
                                       <span class="token-selected">TRX</span>
                                    </h4>
                                    <p>estimated payout</p>
                                    <input id="slider" type="range" min="0" max="800" step="1" value="200" style="display: none;" />
                                    <input id="slider2" type="range" min="0" max="800" step="1" value="100" style="display: none;" />
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </section>
      <!-- Emd Main Wrapper -->
      <script type="text/javascript" src="js/jquery.min.js"></script>
      <script type="text/javascript" src="js/bootstrap.min.js"></script>
      <script type="text/javascript" src="js/jquery.reflection.js"></script>
      <script type="text/javascript" src="js/jquery.cloud9carousel.js"></script>
      <script>
         /* ** Responsive Nav js ** */

         $('#open-nav').on('click', function(){

           $('.resp-nav').addClass('resp-nav-open');

         });



         $('#close-nav').on('click', function(){

           $('.resp-nav').removeClass('resp-nav-open');

         });

         /* ** End Responsive Nav js ** */



         $(function() {

             var showcase = $("#showcase")

             showcase.Cloud9Carousel( {

                 yPos: 42,

                 yRadius: 48,

                 mirrorOptions: {

                   gap: 18,

                   height: 0.5

                 },

                 buttonLeft: $(".nav > .left"),

                 buttonRight: $(".nav > .right"),

                 autoPlay: false,

                 bringToFront: false,
                 frontItemClass: "active",

                 onRendered: showcaseUpdated,

                 onLoaded: function() {

                   showcase.css( 'visibility', 'visible' )

                   showcase.css( 'display', 'none' )

                   showcase.fadeIn( 2000 )

                 }

             })



             function showcaseUpdated( showcase ) {

                 var title = $('#item-title').html(

                     $(showcase.nearestItem()).attr( 'alt' )

                 )
                 // Every planet info changes on click
                 $('.detail-head').html($('.main-goal.active').children("img").attr("data-name"));
                 $('#staked-amount').html($('.main-goal.active').children("img").attr("data-staked"));
                 $('.token-selected').each((i,el)=>{el.innerHTML = $('.main-goal.active').children("img").attr("token")})
                 $('#total-staked').html($('.main-goal.active').children("img").attr("data-total-staked"));
                 $('#my-earning').html($('.main-goal.active').children("img").attr("data-earning"));
                 $('#estimated-payout').html($('.main-goal.active').children("img").attr("data-payout"));
                 $('#arrow-left').html($('.main-goal.active').children("img").attr("data-left"));
                 $('#arrow-right').html($('.main-goal.active').children("img").attr("data-right"));


                 var c = Math.cos((showcase.floatIndex() % 1) * 2 * Math.PI)

                     title.css('opacity', 0.5 + (0.5 * c))

                 }



             // Simulate physical button click effect

             $('.nav > button').click( function( e ) {

                 var b = $(e.target).addClass( 'down' )

                 setTimeout( function() { b.removeClass( 'down' ) }, 80 )



             })



             $(document).keydown( function( e ) {

                 //

                 // More codes: http://www.javascripter.net/faq/keycodes.htm

                 //

                 switch( e.keyCode ) {

                     /* left arrow */

                     case 37:

                     $('.nav > .left').click()

                     break



                     case 39:

                     $('.nav > .right').click()

                 }

             })

         })

      </script>
      <script type="text/javascript">
         var _gaq = _gaq || [];

         _gaq.push(['_setAccount', 'UA-36251023-1']);

         _gaq.push(['_setDomainName', 'jqueryscript.net']);

         _gaq.push(['_trackPageview']);



         (function() {

           var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;

           ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

           var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

         })();



         function time() {
             var d1 = new Date();
             var d2 = Date.UTC(d1.getUTCFullYear(),
                               d1.getUTCMonth(),
                               d1.getUTCDate() + (d1.getUTCHours() < 12 ? 0 : 1),
                               12);
             var dh = d2 - d1;
             var hours = Math.floor(dh / 3600000);
             var dm = dh - 3600000 * hours;
             var min = Math.floor(dm / 60000);
             var ds = dm - 60000 * min;
             var sec = Math.floor(ds / 1000);
             var dmilli = ds - 1000 * sec;
             setTimeout(time, dmilli);
             hours = ('0' + hours).slice(-2);
             min = ('0' + min).slice(-2);
             sec = ('0' + sec).slice(-2);
             document.getElementById('defaultCountdown').innerHTML = ( hours + 'h ' + min + 'm ' + sec + 's ')
         }
         time()

      </script>

      <script type="text/javascript">
         height = $('header').height() + 50;
         $('.main-wrpper').css("height","calc(100vh - "  +height+"px)")
      </script>
      <script src="js/jquery.plugin.min.js"></script>

<script>
$(document).ready(function() {
  const config_json = {
  /*  LIGHTMATTER: {
      num:1,
      tokenAddress: 'TUKhG4PsgEsL7xEk42eHaDQPDrnzZsTNqo',
      stakeDataAddress: 'TArgTK9v9ztc6hxpawj921xSjRvGPppd4g',
      stakeHandlerAddress: 'TJz7aVd1LNfprpxW39XGskXdj262vFfZbG',
      decimals: 1e6,
    },*/
    DARKMATTER: {
      num:2,
      tokenAddress: 'TRe4vX2EiXFqJhAqL7MJC2kfJUw5spJsCa',
      stakeDataAddress: 'TXxADkSeHh7sAodY1gLkvzfaAcxGEKLagS',
      stakeHandlerAddress: 'TEjE224B1D5wzcjNUTP2w5K8qrEqPCaxuP',
      decimals: 1e6,
    },
    /*VOID: {
      num:3,
      tokenAddress: 'TUKhG4PsgEsL7xEk42eHaDQPDrnzZsTNqo',
      stakeDataAddress: 'TArgTK9v9ztc6hxpawj921xSjRvGPppd4g',
      stakeHandlerAddress: 'TJz7aVd1LNfprpxW39XGskXdj262vFfZbG',
      decimals: 1e6,
    },
    FRAG: {
      num:4,
      tokenAddress: 'TUKhG4PsgEsL7xEk42eHaDQPDrnzZsTNqo',
      stakeDataAddress: 'TArgTK9v9ztc6hxpawj921xSjRvGPppd4g',
      stakeHandlerAddress: 'TJz7aVd1LNfprpxW39XGskXdj262vFfZbG',
      decimals: 1e6,
    },
    */
  }

  //rounding functions
  function parseFloat(str, radix) {
    let parts = str.split(".");
    if ( parts.length > 1 ) {
      return parseInt(parts[0], radix) + parseInt(parts[1], radix) / Math.pow(radix, parts[1].length);
    }
    return parseInt(parts[0], radix);
  }

  function abbreviateNumber(num)
  {
    if(num >= 1000000)
      return roundToTwoOrFour(num/1000000)+'M';
    if(num >= 1000)
      return roundToTwoOrFour(num/1000)+'k';
    return (num);
  }

  function roundToFour(num) {
    return +(Math.floor(num + 'e+4') + 'e-4')
  }

  function roundToTwo(num) {
    return +(Math.floor(num + 'e+2') + 'e-2')
  }

  function round(num) {
    return +(Math.floor(num + 'e+0') + 'e-0')
  }

  function roundToTwoOrFour(num){
    if(num<1) return roundToFour(num)
    return roundToTwo(num)
  }

  //updateHTML
  let selected = "DARKMATTER"
  let tokenSelected = undefined
  setInterval(()=>{
    tokenSelected = config_json[selected]
    updateStakedBalance(tokenSelected)
    updateTotalStaked(tokenSelected)
    updateCycleRewards(tokenSelected)
    updateRewards(tokenSelected)
    updateUserAddy()
  }, 2000)
  setInterval(()=>{
    updateTotal()
  }, 5000)

  async function updateUserAddy() {
    if(!tronWeb.defaultAddress.base58) return
    let bal = await tronWeb.contract().at('TXhv2baQ2q3TWerrwBiXjj27js9QocJFU9')
    bal = await bal.balanceOf(tronWeb.defaultAddress.base58).call()
    const addy = tronWeb.defaultAddress.base58.slice(0,5) +'... '+ abbreviateNumber(parseInt(bal._hex,16)/1e6) + ' DMD'
    document.getElementById('user_addy').innerHTML = addy
    document.getElementById('user_addy2').innerHTML = addy
  }

  async function updateStakedBalance(tokenSelected) {
    stakeDataInstance = await tronWeb.contract().at(tokenSelected.stakeDataAddress)
    const stakedBalance = await stakeDataInstance.getMyStakeedTokens().call()
    document.getElementById('token'+tokenSelected.num).setAttribute('data-staked', roundToTwoOrFour(parseFloat(stakedBalance._hex, 16)/tokenSelected.decimals))
  }

  async function updateTotalStaked(tokenSelected) {
    stakeDataInstance = await tronWeb.contract().at(tokenSelected.stakeDataAddress)
    const total = await stakeDataInstance.getTokenBalance().call()
    document.getElementById('token'+tokenSelected.num).setAttribute('data-total-staked', roundToTwoOrFour(parseFloat(total._hex, 16)/tokenSelected.decimals))
  }

  async function updateCycleRewards(tokenSelected) {
    stakeHandlerInstance = await tronWeb.contract().at(tokenSelected.stakeHandlerAddress)
    const total = await stakeHandlerInstance.calculateMyCurrentCycleRewards().call()
    document.getElementById('token'+tokenSelected.num).setAttribute('data-payout', roundToTwoOrFour(parseFloat(total._hex, 16)/tokenSelected.decimals))
  }

  async function updateRewards(tokenSelected) {
    stakeHandlerInstance = await tronWeb.contract().at(tokenSelected.stakeHandlerAddress)
    const total = await stakeHandlerInstance.calculateMyRewardsSinceLastClaim().call()
    document.getElementById('token'+tokenSelected.num).setAttribute('data-earning', roundToTwoOrFour(parseFloat(total._hex, 16)/tokenSelected.decimals))
  }

  async function updateTotal(){
      if(config_json['LIGHTMATTER']) lightmatterContract = await tronWeb.contract().at(config_json['LIGHTMATTER'].stakeHandlerAddress)
      if(config_json['DARKMATTER']) darkmatterContract = await tronWeb.contract().at(config_json['DARKMATTER'].stakeHandlerAddress)
      if(config_json['VOID']) voidContract = await tronWeb.contract().at(config_json['VOID'].stakeHandlerAddress)
      if(config_json['FRAG']) fragContract = await tronWeb.contract().at(config_json['FRAG'].stakeHandlerAddress)
      const totalLight = await stakeHandlerInstance.getAvailableBalance().call()
      const totalDark = await stakeHandlerInstance.getAvailableBalance().call()
      const totalVoid = await stakeHandlerInstance.getAvailableBalance().call()
      const totalFrag = await stakeHandlerInstance.getAvailableBalance().call()
      if(config_json['LIGHTMATTER']) document.getElementById('lmh-total').innerHTML = roundToTwoOrFour(parseFloat(totalLight._hex, 16)/config_json['LIGHTMATTER'].decimals)
      if(config_json['DARKMATTER']) document.getElementById('dmd-total').innerHTML = roundToTwoOrFour(parseFloat(totalDark._hex, 16)/config_json['DARKMATTER'].decimals)
      if(config_json['VOID']) document.getElementById('void-total').innerHTML = roundToTwoOrFour(parseFloat(totalVoid._hex, 16)/config_json['VOID'].decimals)
      if(config_json['FRAG']) document.getElementById('frag-total').innerHTML = roundToTwoOrFour(parseFloat(totalFrag._hex, 16)/config_json['FRAG'].decimals)
  }
  /*
  async function updateNextPayout() {
    stakingInstance = await tronWeb.contract().at(stakingAddress)
    const date = new Date()
    let nextPayoutAt = await stakingInstance.nextPayoutAt().call()
    nextPayoutAt = new Date(parseInt(nextPayoutAt._hex)*1000)
    let timeLeft = nextPayoutAt - date
    setInterval(()=>{
      var seconds = Math.floor((timeLeft / 1000) % 60);
      var minutes = Math.floor((timeLeft / 1000 / 60) % 60);
      var hours = Math.floor((timeLeft / (1000 * 60 * 60)) % 24);
      timeLeft = timeLeft - 1000
      document.getElementById('time-left').innerHTML = `${('0'+hours).slice(-2)}:${('0'+minutes).slice(-2)}:${('0'+seconds).slice(-2)}`
    },1000)
  }
  */
  /*
  async function apy() {
    stakingInstance = await tronWeb.contract().at(stakingAddress)
    const rewardRate = await stakingInstance.rewardRate().call()
    const totalSupply = await stakingInstance.totalSupply().call()
    document.getElementById('apy').innerHTML = roundToTwoOrFour(parseFloat(totalSupply._hex, 16)/parseFloat(rewardRate._hex, 16))
  }
  */

  async function stake() {
    tokenInstance = await tronWeb.contract().at(tokenSelected.tokenAddress)
    let amount = document.getElementById('stake_amount').value
    amount = amount * tokenSelected.decimals
    const bytes = '0x000000000000000000000000000000000000000000000000000000000000000'
    await tokenInstance.methods.approveAndCall(tokenSelected.stakeDataAddress, amount, bytes).send()
  }


  async function unstake() {
    stakeDataInstance = await tronWeb.contract().at(tokenSelected.stakeDataAddress)
    const amount = document.getElementById('unstake_amount').value
    await stakeDataInstance.unstakeTokens(amount*tokenSelected.decimals).send()
  }

  async function claim() {
    stakeHandlerInstance = await tronWeb.contract().at(tokenSelected.stakeHandlerAddress)
    await stakeHandlerInstance.claimRewards().send()
  }

  $('#click-left').click(function(err) {
     selected = document.getElementById('arrow-left').innerHTML.replace(' ', '').toUpperCase()
  })
  $('#click-right').click(function(err) {
     selected = document.getElementById('arrow-right').innerHTML.replace(' ', '').toUpperCase()
  })
  $( "#stake" ).click(function() {
    stake()
  })

  $( "#unstake" ).click(function() {
    unstake()
  })

  $( "#claim" ).click(function() {
    claim()
  })

})
</script>





<script>
    // The curve
function line1(){
   var canvas = document.getElementById('canvas');
   var ctx = canvas.getContext('2d');
   var oy = 100;

   function calc(x){
       if (x > 700)
       {
           var j = oy + Math.sin(80+x*400)
       }
       else if (x > 600)
       {
           var j = oy + ((50 - (x - 600)/2)*Math.sin(80+x*400))
       } else {
           var j = oy + (50*Math.sin(80+x*400))
       }
       return j;
   }



   var slider=document.getElementById('slider');
   function draw(getY,color) {
     var grd = ctx.createLinearGradient(0, 0, 170, 0);
     grd.addColorStop(0, "#2d9cdb");
     grd.addColorStop(.5, "#33e1fd");
     grd.addColorStop(1, "#44e3ff");
     ctx.strokeStyle = grd;
     ctx.beginPath();
     var x=0; var y=0;
     var first=true;
     for (x=0; x<=800 && (x <= slider.value); x+=3){
         y= getY(x);
         if(first){ ctx.moveTo(x,y); first=false;}
         ctx.lineTo(x, y);
     }
     ctx.stroke();
     ctx.closePath();
     newSprite(x, y)
   }
   function newSprite(mvx, mvy) {
       ctx.beginPath();
       var grd = ctx.createLinearGradient(0, 0, 170, 0);
       grd.addColorStop(0, "#fff");
       grd.addColorStop(.5, "#fff");
       grd.addColorStop(1, "#fff");
       ctx.fillStyle = grd;
       ctx.arc(mvx, mvy, 4, 0, Math.PI * 2, true);
       ctx.closePath();
       ctx.fill();
   }
   function change(){
       canvas.width=canvas.width;
       draw(calc,'#ED9FFF');
   }


   function animationline(){
       $("#canvas").css('opacity', '0');
       setTimeout(function(){
           $("#canvas").removeAttr('style');
           setTimeout(function(){
               $("#canvas").css('animation', 'leftgo 16s infinite linear');
           },100)
           for (var i = 0; i < 800; i++)
           {
               let x = i;
               setTimeout(function(){
                   $(slider).val(x);
                   change();
                   if (x == 799)
                   {
                       $("#canvas").css('animation-play-state', 'paused');
                       animationline();
                   }
               },10*x)
           }
       },500)

   }
   animationline();
}
function line2(){
   var canvas = document.getElementById('canvas2');
   var ctx = canvas.getContext('2d');
   var oy = 100;

   function calc(x){
       if (x > 700)
       {
           var j = oy + Math.sin(80+x*400)
       }
       else if (x > 600)
       {
           var j = oy + ((50 - (x - 600)/2)*Math.sin(80+x*400))
       } else {
           var j = oy + (50*Math.sin(80+x*400))
       }
       return j;
   }



   var slider=document.getElementById('slider2');
   function draw(getY,color) {
     var grd = ctx.createLinearGradient(0, 0, 170, 0);
     grd.addColorStop(0, "#c9fa98");
       grd.addColorStop(.5, "#d4fc88");
       grd.addColorStop(1, "#d7ff83");
     ctx.strokeStyle = grd;
     ctx.beginPath();
     var x=0; var y=0;
     var first=true;
     for (x=0; x<=800 && (x <= slider.value); x+=3){
         y= getY(x);
         if(first){ ctx.moveTo(x,y); first=false;}
         ctx.lineTo(x, y);
     }
     ctx.stroke();
     ctx.closePath();
     newSprite(x, y)
   }
   function newSprite(mvx, mvy) {
       ctx.beginPath();
       var grd = ctx.createLinearGradient(0, 0, 170, 0);
       grd.addColorStop(0, "#fff");
       grd.addColorStop(.5, "#fff");
       grd.addColorStop(1, "#fff");
       ctx.fillStyle = grd;
       ctx.arc(mvx, mvy, 4, 0, Math.PI * 2, true);
       ctx.closePath();
       ctx.fill();
   }
   function change(){
       canvas.width=canvas.width;
       draw(calc,'#ED9FFF');
   }


   function animationline(){
       $("#canvas2").css('opacity', '0');
       setTimeout(function(){
           $("#canvas2").removeAttr('style');
           setTimeout(function(){
               $("#canvas2").css('animation', 'leftgo 16s infinite linear');
           },100)
           for (var i = 0; i < 800; i++)
           {
               let x = i;
               setTimeout(function(){
                   $(slider).val(x);
                   change();
                   if (x == 799)
                   {
                       $("#canvas2").css('animation-play-state', 'paused');
                       animationline();
                   }
               },10*x)
           }
       },500)

   }
   animationline();
}
line1();
line2()
</script>
   </body>
</html>
